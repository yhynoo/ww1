on_actions = {
    on_annex = {
        effect = {

            # After Makhnovshchina falls, reset Ukraine to monarchism
            if = {
                limit = { FROM = { tag = UKR } }
                SOV = { news_event = { id = russia_anarchy_in_ukraine.7 hours = 12 random_hours = 6 } }
            }
        }
    }

    on_government_change = {
        effect = {
            if = { 
                limit = { has_government = communism }
                load_focus_tree = communist_focus

                if = { 
                    limit = { is_in_faction = yes } 
                    leave_faction = yes 
                }
                every_country = {
                    limit = { and = { has_war_with = ROOT has_government = communism } }
                    white_peace = ROOT
                }
            }
        }
    }

    on_state_control_changed = {
        effect = {
            # Austria liberates Poland
            if = {
                limit = {
                    tag = AUS
                    has_country_flag = austria_likes_poland
                    FROM.FROM = { state = 10 }
                }
                country_event = austria_contain_russian_expansion.5
            }

            # Austria liberates Ukraine
            if = {
                limit = {
                    tag = AUS
                    has_country_flag = austria_likes_ukraine
                    FROM.FROM = { state = 202 }
                }
                country_event = austria_contain_russian_expansion.8
            }

            # Germany puppets Central Europe
            if = {
                limit = {
                    tag = GER
                    FROM.FROM = { state = 808 }
                }
                country_event = baltic_german_conquest.1
            }

            #if = {
            #    limit = {
            #        tag = GER
            #        has_war_with = SOV
            #        FROM.FROM = { state = 10 }
            #    }
            #    country_event = poland_german_conquest.1
            #}

            if = {
                limit = {
                    tag = GER
                    has_war_with = SOV
                    FROM.FROM = { state = 202 }
                }
                country_event = ukraine_german_conquest.1
            }

            # Ottomans liberate Caucasus
            if = {
                limit = {
                    tag = TUR
                    FROM.FROM = { state = 229 }
                }
                country_event = caucasus_liberation.1
            }

            # Germany loses Alsace-Lorraine
            if = {
                limit = {
                    FROM = GER
                    FROM.FROM = { state = 28 }
                }
                if = {
                    limit = { has_idea = sww1_idea_unrest_in_alsace_lorraine }
                    remove_ideas = sww1_idea_unrest_in_alsace_lorraine
                }
            }
        }
    }

    on_declare_war = {
        effect = {
            if = {
                limit = {
                    28 = { is_demilitarized_zone = yes }
                    or = {
                        and = { tag = GER FROM = { tag = FRA } }
                        and = { tag = FRA FROM = { tag = GER } }
                    }
                }
                28 = { set_demilitarized_zone = no }
            }
        }
    }
}