on_actions = {
    on_annex = {
        effect = {

            # After Makhnovshchina falls, reset Ukraine to monarchism
            if = {
                limit = { FROM = { tag = UKR } }
                SOV = { news_event = { id = ukraine_makhnovshchina.5 hours = 12 random_hours = 6 } }
            }
        }
    }

    on_government_change = {
        effect = {
            if = { 
                limit = { has_government = communism }
                load_focus_tree = communist_focus

                if = { 
                    limit = { is_in_faction = yes } 
                    leave_faction = yes 
                }
                every_country = {
                    limit = { and = { has_war_with = ROOT has_government = communism } }
                    white_peace = ROOT
                }
            }
        }
    }

    on_state_control_changed = {
        effect = {
            # Austria liberates Poland
            if = {
                limit = {
                    tag = AUS
                    has_country_flag = austria_likes_poland
                    FROM.FROM = { state = 10 }
                }
                country_event = austria_contain_russian_expansion.5
            }

            # Austria liberates Ukraine
            if = {
                limit = {
                    tag = AUS
                    has_country_flag = austria_likes_ukraine
                    FROM.FROM = { state = 202 }
                }
                country_event = austria_contain_russian_expansion.8
            }

            # Germany puppets Central Europe
            if = {
                limit = {
                    tag = GER
                    has_war_with = SOV
                    FROM.FROM = { state = 808 }
                }
                country_event = baltic_german_conquest.1
            }

            #if = {
            #    limit = {
            #        tag = GER
            #        has_war_with = SOV
            #        FROM.FROM = { state = 10 }
            #    }
            #    country_event = poland_german_conquest.1
            #}

            if = {
                limit = {
                    tag = GER
                    has_war_with = SOV
                    FROM.FROM = { state = 202 }
                }
                country_event = ukraine_german_conquest.1
            }

            # Ottomans liberate Caucasus
            if = {
                limit = {
                    tag = TUR
                    has_country_flag = liberate_caucasus 
                    FROM.FROM = { state = 229 }
                }
                country_event = caucasus_liberation.1
            }
        }
    }
}