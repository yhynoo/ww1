on_actions = {
    on_war_relation_added = {
        effect = {
            if = {
                limit = { original_tag = FROM }         # if root has the same tag as FROM, it is a civil war.

                # countries or generic?
                if = {
                    limit = { FROM = { tag = MEX is_dynamic_country = no } }
                    # event is not needed here, as it's launched via on_actions/startup.txt
                }
                else_if = {
                    limit = { FROM = { tag = SOV } }
                    # event is not needed here, as it's launched via the focus tree
                    east_civil_war = yes
                }
                else = {
                    news_event = { id = x_civil_war_start.1 hours = 6 random_hours = 6 } 
                }

                # adjust ideologies.
                FROM = { add_popularity = { ideology = ROOT popularity = -0.5 } }

                # can't magically peace out
                every_country = {
                    limit = { 
                        has_war_with = ROOT
                        or = { is_faction_leader = yes is_in_faction = no }
                    }
                    FROM = {
                        declare_war_on = { target = PREV type = topple_government }
                    }
                }
            }
        }
    }

    on_civil_war_end = {
        effect = {
            news_event = { id = x_civil_war_end.1 hours = 6 random_hours = 6 }

            # add idea and reset things
            add_timed_idea = { idea = idea_aftermath_of_civil_war years = 1 }
            set_rule = { can_join_factions = yes }
        }
    }
}