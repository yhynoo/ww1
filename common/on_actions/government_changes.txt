on_actions = {
    on_ruling_party_change = {
        effect = {
            if = {
                limit = {
                    tag = COL
                    not = { has_government = authoritarianism }
                }
                remove_ideas = idea_a_liberal_autocrat
            }

            if = { 
                limit = { has_government = communism }
                load_focus_tree = communist_focus

                if = { 
                    limit = { is_in_faction = yes } 
                    leave_faction = yes 
                }
                every_country = {
                    limit = { and = { has_war_with = ROOT has_government = communism } }
                    white_peace = ROOT
                }
            }
        }
    }
}