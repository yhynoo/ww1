add_namespace = ottoman_events

### 1. Sarajevo Memorandum

news_event = {
    id = ottoman_events.1
    title = "[TUR.GetName] Withdraws from Serbia"
    desc = ottoman_events.1.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "A shift towards the Muslim world."
    }
}

news_event = {
    id = ottoman_events.2
    title = "[TUR.GetName] Empire Calls for Liberation of Crimea and Caucasus"
    desc = ottoman_events.2.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "A declaration of intent against Russia."
        if = {
            limit = { tag = SOV }
            add_opinion_modifier = {
                target = TUR
                modifier = large_decrease
            }
        }
    }
}

country_event = {
    id = ottoman_events.3
    title = "[TUR.GetName] Seeks British Support"
    desc = ottoman_events.3.d

    is_triggered_only = yes

    option = {
        name = "Support the Ottomans."
        news_event = { id = ottoman_events.4 hours = 12 random_hours = 6 }
        
        ai_chance = {
            base = 1
            modifier = {
                and = {
                    or = {
                        is_in_faction_with = FRA
                        has_guaranteed = FRA
                    }
                    TUR = { has_completed_focus = TUR_alafranga }
                }
                factor = 3
            }
            modifier = {
                has_country_flag = turkey_gave_egypt
                factor = 3
            }
            modifier = {
                GER = { is_ally_with = SOV }            # If the Germans are friends with Russians, we really need the Turks.
                factor = 20
            }
        }

        ENG = {
            if = {
                limit = { is_in_faction_with = SOV }
                remove_from_faction = SOV
            }
            if = {
                limit = { has_guaranteed = SOV }
                remove_from_faction = SOV
            }
            give_guarantee = TUR        # Turkey replaces Russia in the Entente.

            hidden_effect = {
                if = {
                    limit = { not = { SOV = { has_country_flag = treacherous_albion } } }
                    set_country_flag = treacherous_albion
                }
            }
        }
    }

    option = {
        name = "Deny their request."
        TUR = { news_event = { id = ottoman_events.5 hours = 12 random_hours = 6 } }

        ai_chance = { 
            base = 1

            modifier = {
                has_guaranteed = SOV          
                factor = 2
            }
            modifier = {
                is_ally_with = SOV           # If they are allies, it's much likely than just a guarantee.
                factor = 3
            }
        }
    }
}

news_event = {
    id = ottoman_events.4
    title = "Shift in the Alliances in the East!"
    desc = ottoman_events.4.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "Interesting."
        if = {
            limit = { tag = SOV }
            add_opinion_modifier = {
                target = ENG
                modifier = large_decrease
            }
            create_wargoal = {
                target = TUR
                type = puppet_wargoal_focus
            }
        }
    }
}

news_event = {
    id = ottoman_events.5
    title = "United Kingdom Refuses Ottoman Request"
    desc = ottoman_events.5.d

    is_triggered_only = yes

    option = {
        name = "A diplomatic setback."
        
        hidden_effect = {
            set_country_flag = england_rejected_us
        }
    }
}

### 2. Alafranga

country_event = {
    id = ottoman_events.6
    title = "[TUR.GetName] Seeks French Guarantees"
    desc = ottoman_events.6.d

    is_triggered_only = yes

    option = {
        name = "Grant the Ottoman request."
        news_event = { id = ottoman_events.7 hours = 12 random_hours = 6 }
        give_guarantee = TUR
    }

    option = {
        name = "Refuse to guarantee them."
        TUR = { 
            news_event = { id = ottoman_events.8 hours = 12 random_hours = 6 }
            add_opinion_modifier = {
                target = FRA
                modifier = medium_decrease
            }
        }
    }
}

news_event = {
    id = ottoman_events.7
    title = "France Agrees to Protect the Ottoman Empire"
    desc = ottoman_events.7.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "A French-backed future."
    }
}

news_event = {
    id = ottoman_events.8
    title = "France Declines Ottoman Request for Protection"
    desc = ottoman_events.8.d

    is_triggered_only = yes

    option = {
        name = "A rejection from Europe."
    }
}

### 3. Default on the Debt

country_event = {
    id = ottoman_events.9
    title = "[TUR.GetName] Offers Egypt to the United Kingdom"
    desc = ottoman_events.9.d

    is_triggered_only = yes

    option = {
        name = "Accept the offer."
        news_event = { id = ottoman_events.10 hours = 12 random_hours = 6 }
        
        every_state = {
            limit = {
                or = {
                    state = 447
                    state = 452
                    state = 456
                    state = 457
                    state = 551
                    state = 552
                    state = 767
                    state = 907
                }
            }
            transfer_state_to = ENG
        }

        ai_chance = { base = 3 }

        TUR = {
            if = {
                limit = { has_idea = sww1_idea_amassed_foreign_debt }
                remove_ideas = sww1_idea_amassed_foreign_debt
            }
            if = {
                limit = { has_idea = sww1_idea_significant_foreign_debt }
                remove_ideas = sww1_idea_significant_foreign_debt
            }
        }

        hidden_effect = {                                       # Sets the flag used in event about kicking Russia.
            set_country_flag = turkey_gave_egypt

            447 = { remove_claim_by = TUR }
            452 = { remove_claim_by = TUR }
            456 = { remove_claim_by = TUR }
            457 = { remove_claim_by = TUR }
            551 = { remove_claim_by = TUR }
            552 = { remove_claim_by = TUR }
            767 = { remove_claim_by = TUR }
            907 = { remove_claim_by = TUR }
        }
    }

    option = {
        name = "Reject the proposal."
        TUR = { 
            news_event = { id = ottoman_events.11 hours = 12 random_hours = 6 }
            add_opinion_modifier = {
                target = ENG
                modifier = small_decrease
            }
        }

        ai_chance = { base = 1 }
    }
}

news_event = {
    id = ottoman_events.10
    title = "United Kingdom Acquires Egypt from the Ottomans"
    desc = ottoman_events.10.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "A strategic acquisition."
    }
}

news_event = {
    id = ottoman_events.11
    title = "United Kingdom Refuses Ottoman Offer of Egypt"
    desc = ottoman_events.11.d

    is_triggered_only = yes

    option = {
        name = "A deal that never was."
    }
}
