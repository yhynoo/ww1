add_namespace = germany_civil_war

news_event = {
    id = germany_civil_war.1
    title = "German Sailors Establish a Socialist Council!"
    desc = germany_civil_war.1.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "The German ship is sinking."
        add_popularity = { ideology = communism popularity = 0.05 }

        if = {
            limit = { tag = FRA }
            8 = { add_claim_by = FRA }
        }

        if = {
            limit = { tag = POL }
            85 = { add_claim_by = POL }
            86 = { add_claim_by = POL }
        }
    }
}

news_event = {
    id = germany_civil_war.2
    title = "Kaiser Exiled?"
    desc = germany_civil_war.2.d

    trigger = {
        original_tag = GER has_government = communism controls_state = 64
        any_country = { has_country_leader = { character = GER_wilhelm_ii ruling_only = yes } }
    }

    major = yes

    option = {
        trigger = { original_tag = GER has_government = communism }
        name = "Time for a new order!"
        add_political_power = 100
    }
    option = {
        trigger = { original_tag = GER not = { has_government = communism } }
        name = "We must avenge this insult."

        promote_character = GER_albrecht
        add_war_support = 0.1
    }
    option = {
        trigger = { not = { original_tag = GER } }
        name = "Right."
    }
}

# independence wars
news_event = {
    id = germany_civil_war.3
    title = "Baden Declares Independence"
    desc = germany_civil_war.3.d

    major = yes

    trigger = {
        WUR = { 
            exists = no
            not = { has_country_flag = baden_released }
        }
        any_country = { original_tag = GER has_government = communism controls_state = 50 }
    }

    option = {
        name = "The Black Forest won't turn red."
        
        if = {
            limit = { tag = GER }
            hidden_effect = { 
                start_badenian_independence_war = yes
                WUR = { set_rule = { can_join_factions = no } set_country_flag = baden_released }
            }
        }
    }
}

news_event = {
    id = germany_civil_war.4
    title = "[BAY.GetName] Established!"
    desc = germany_civil_war.4.d

    major = yes
    trigger = {
        BAY = { 
            exists = no
            not = { has_country_flag = bayern_released }
        }
        any_country = { original_tag = GER has_government = communism controls_state = 52 }
    }

    option = {
        name = "Strong in loyalty."
        if = {
            limit = { tag = GER }
            hidden_effect = { 
                start_bavarian_independence_war = yes
                BAY = { set_rule = { can_join_factions = no } set_country_flag = bayern_released }
            }
        }
    }
}

news_event = {
    id = germany_civil_war.5
    title = "[HAN.GetName] Against Communism!"
    desc = germany_civil_war.5.d

    major = yes
    trigger = {
        HAN = { 
            exists = no
            not = { has_country_flag = hanover_released }
        }
        any_country = { original_tag = GER has_government = communism controls_state = 59 }
    }
    
    option = {
        name = "The old order holds firm."
        hidden_effect = { 
            if = {
                limit = { tag = GER }

                hidden_effect = {
                    start_hanover_independence_war = yes
                    HAN = { 
                        set_rule = { can_join_factions = no } set_country_flag = hanover_released
                        58 = { add_claim_by = HAN }
                    }
                }
            }
        }
    }
}

# aftermath
news_event = {
    id = germany_civil_war.6
    title = "Clashes in Germany End"
    desc = germany_civil_war.6.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "Great."

        if = {
            limit = { tag = GER }
            add_timed_idea = { idea = idea_aftermath_of_german_civil_war years = 1 }
        }
    }
}

country_event = {
    id = germany_civil_war.7
    title = "The Question of Reunification"
    desc = germany_civil_war.7.d

    is_triggered_only = yes

    option = {
        name = "We agree."
        FROM = { 
            news_event = { id = germany_civil_war.8 hours = 6 random_hours = 6 }
            annex_country = { target = ROOT transfer_troops = yes }
        }

        ai_chance = { 
            base = 3
            modifier = { 
                and = { FROM = { has_government = communism } not = { has_government = communism } }
                factor = 0 
            }
        }
    }
    option = {
        name = "We are better on our own."
        FRA = { news_event = { id = germany_civil_war.9 hours = 6 random_hours = 6 } }

        ai_chance = { base = 1 }
    }
}

news_event = {
    id = germany_civil_war.8
    title = "[FROM.GetName] Agrees to Reunification"
    desc = germany_civil_war.8.d

    is_triggered_only = yes

    option = {
        name = "Great."
    }
}

news_event = {
    id = germany_civil_war.9
    title = "[FROM.GetName] Declines!"
    desc = germany_civil_war.9.d

    is_triggered_only = yes

    option = {
        name = "This is disappointing."
    }
}