add_namespace = ukraine_makhnovshchina

news_event = {
    id = ukraine_makhnovshchina.1
    title = "Peasant Strikes in Ukraine"
	desc = ukraine_makhnovshchina.1.d

	major = yes
	is_triggered_only = yes

	trigger = {
        UKR = { exists = no }
		SOV = {
            or = {
                not = { has_government = communism }
			    not = { has_completed_focus = SOV_one_and_indivisible }
            }
		}
	}

	option = {
		if = {
			limit = { tag = SOV }

			add_stability = -0.025
			add_ideas = sww1_idea_looming_revolution

			hidden_effect = {
                country_event = { id = ukraine_makhnovshchina.2 days = 28 random_days = 70 }
				add_named_threat = {
					threat = 2
					name = "Peasant Strikes in Ukraine"
				}
			}
		}
		name = "The countryside is in turmoil."
	}
}

country_event = {
    id = ukraine_makhnovshchina.2
    title = "Sabotage in Ukrainian Factories"
    desc = ukraine_makhnovshchina.2.d

    trigger = {
        UKR = { exists = no }
		has_idea = sww1_idea_looming_revolution
        not = { has_completed_focus = SOV_self_determination }
	}
    is_triggered_only = yes

    option = {
        name = "We must investigate this matter."
        add_political_power = -50

        hidden_effect = {
            country_event = { id = ukraine_makhnovshchina.3 days = 7 random_days = 28 }
        }

        ai_chance = { base = 2 }
    }

    option = {
        name = "Send in the military."
        add_popularity = {
            ideology = communism
            popularity = 0.025
        }

        hidden_effect = {
            country_event = { id = ukraine_makhnovshchina.4 days = 140 random_days = 70 }
        }

        ai_chance = { base = 1 }
    }
}

news_event = {
    id = ukraine_makhnovshchina.3
    title = "Ukrainian Revolt Preparations Discovered"
    desc = ukraine_makhnovshchina.3.d

    trigger = { UKR = { exists = no } }
    is_triggered_only = yes

    option = {
        name = "Very good."
        add_stability = 0.05
    }
}

news_event = {
    id = ukraine_makhnovshchina.4
    title = "Anarchy in Zaporizhzhia!"
    desc = ukraine_makhnovshchina.4.d

    trigger = { 
        UKR = { exists = no }

        has_stability < 0.5
        any_controlled_state = {
            or = { state = 137 state = 196 state = 200 }
        }
    }

    is_triggered_only = yes
    major = yes
    
    option = {
        name = "Freedom or death!"

        if = {
            limit = { tag = SOV }

            hidden_effect = {
                every_state = {
                    limit = {
                        or = { state = 137 state = 196 state = 200 }
                        is_controlled_by = SOV
                    }
                    transfer_state_to = UKR
                }

                UKR = {
                    set_politics = {
                        ruling_party = communism
                        elections_allowed = no
                    }
                    set_popularities = {
                        communism = 85
                        democratic = 10
                        monarchism = 5
                    }
                    load_oob = "UKR_makhnovshchina"
                    set_cosmetic_tag = UKM
                }
            }

            declare_war_on = {
                target = UKR
                type = annex_everything
            }
        }
    }
}