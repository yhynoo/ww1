add_namespace = france_spain_economy

country_event = {
    id = france_spain_economy.1
    title = "[FRA.GetName] Offers Economic Investments"
    desc = france_spain_economy.1.d

    is_triggered_only = yes

    option = {
        name = "Sounds good."

        random_owned_controlled_state = {
            limit = { is_core_of = SPA }
            add_building_construction = { type = industrial_complex level = 1 instant_build = yes }
        }

        # manage ideas
        if = {
            limit = { has_idea = idea_growing_french_influence }
            swap_ideas = { remove_idea = idea_growing_french_influence add_idea = idea_significant_french_influence }
        }
        if = {
            limit = { 
                not = { has_idea = idea_growing_french_influence } 
                not = { has_idea = idea_significant_french_influence } 
            }
            add_ideas = idea_growing_french_influence
        }

        FROM = { news_event = { id = france_spain_economy.2 hours = 6 random_hours = 6 } }
    }
    option = {
        name = "We must not trust them."
        FROM = { news_event = { id = france_spain_economy.3 hours = 6 random_hours = 6 } }
    }
}

news_event = {
    id = france_spain_economy.2
    title = "[FROM.GetName] Accepts Our Investments"
    desc = france_spain_economy.2.d

    is_triggered_only = yes

    option = {
        name = "Very well."
        add_timed_idea = { idea = idea_aid_to_spain months = 6 }
    }
}

news_event = {
    id = france_spain_economy.3
    title = "[FROM.GetName] Declines!"
    desc = france_spain_economy.3.d

    is_triggered_only = yes

    option = {
        name = "It's their loss."
    }
}

## annexation

add_namespace = france_spain_annex

country_event = {
    id = france_spain_annex.0
    title = "Unification with Spain?"
    desc = france_spain_annex.0.d

    trigger = {
        tag = FRA
        SPA = { 
            has_government = monarchism
            has_idea = idea_significant_french_influence 
        }
    }
    fire_only_once = yes
    mean_time_to_happen = { months = 6 }

    option = {
        name = "Let us send them our offer."
        SPA = { country_event = { id = france_spain_annex.1 hours = 6 random_hours = 6 } }

        ai_chance = { base = 1 }
    }

    option = {
        name = "This will just cause another war."
        add_popularity = { ideology = democratic popularity = 0.05 }

        ai_chance = { base = 0 }
    }
}

country_event = {
    id = france_spain_annex.1
    title = "[FRA.GetName] Offers Unification"
    desc = france_spain_annex.1.d

    is_triggered_only = yes

    option = {
        name = "Let us unite our countries."

        FROM = { 
            news_event = { id = france_spain_annex.2 hours = 6 random_hours = 6 }
            annex_country = { target = ROOT transfer_troops = yes }

            hidden_effect = {
                every_state = {
                    limit = { is_core_of = SPA }
                    add_core_of = FRA
                }
            }
        }

        ai_chance = { 
            base = 1
            modifier = { FRA = { has_government = monarchism } add = 1 }
        }
    }
    option = {
        name = "We will never agree to this."
        FROM = { 
            news_event = { id = france_spain_annex.3 hours = 6 random_hours = 6 }
            create_wargoal = {
                target = ROOT
                type = take_state_focus
            }
        }

        ai_chance = { base = 2 }
    }
}

news_event = {
    id = france_spain_annex.2
    title = "France and Spain Unified!"
    desc = france_spain_annex.2.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "Interesting."
    }
}

news_event = {
    id = france_spain_annex.3
    title = "[FROM.GetName] Declines!"
    desc = france_spain_annex.3.d

    is_triggered_only = yes

    option = {
        name = "We shall see about it."
    }
}