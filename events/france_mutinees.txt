add_namespace = france_mutinees

country_event = {
    id = france_mutinees.1
    title = "Cracks in the Trenches"
    desc = france_mutinees.1.d

    trigger = {
        tag = FRA

        not = { has_country_flag = exhaustion_fired }
        and = { longest_war_length > 18 or = { has_war_support < 0.5 has_stability < 0.3 } }
    }

    immediate = { 
        hidden_effect = { 
            set_country_flag = exhaustion_fired 
        } 
    }

    option = {
        name = "Enforce discipline through harsh treatment."
        add_political_power = -100

        hidden_effect = { 
            news_event = { id = france_mutinees.2 days = 180 } 
        }

        ai_chance = {
            base = 1
            modifier = { not = { has_country_flag = chose_alternative factor = 0 } }
        }
    }
    option = {
        name = "Allow for less offensive activity."
        add_timed_idea = { idea = idea_cracks_in_trenches years = 1 }
    }
}

news_event = {
    id = france_mutinees.2
    title = "Mutineers Demand End of War"
    desc = france_mutinees.2.d

    is_triggered_only = yes
    trigger = { or = { has_war_support < 0.3 has_stability < 0.2 } }

    option = {
        name = "Awful."
        add_popularity = { ideology = communism popularity = 0.05 }

        add_ideas = idea_mutineers_end
    }
}