add_namespace = poland_uprising

## -- against russia

news_event = {
    id = poland_uprising.1
    title = "Anti-Russian Uprising in Poland!"            # proclamation of the state
    desc = poland_uprising.1.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "Poland is not yet lost!"

        if = { 
            limit = { original_tag = SOV }
            hidden_effect = {
                every_owned_state = {
                    limit = {
                        or = { state = 10 state = 86 state = 87 state = 97 state = 807 state = 814 }
                    }
                    transfer_state_to = POL
                }

                declare_war_on = {
                    target = POL
                    type = annex_everything
                }
            }
        }

        if = {
            limit = { tag = SOV }
            hidden_effect = { 
                POL = { 
                    news_event = { id = poland_uprising.2 hours = 6 }
                    set_politics = { ruling_party = democratic elections_allowed = yes }
                    set_popularities = { communism = 20 democratic = 55 monarchism = 25 }
                }
            }
        }
    }
}

news_event = {
    id = poland_uprising.2
    title = "Volunteers Take Up Arms!"
    desc = poland_uprising.2.d

    is_triggered_only = yes

    option = {
        name = "Great."
        hidden_effect = {
            load_oob = "POL_uprising"
        }
    }
}

## -- against germany

country_event = {
    id = poland_uprising.11
    title = "An Unexpected Opportunity?"
    desc = poland_uprising.11.d

    is_triggered_only = yes

    option = {
        name = "One should not wait any longer!"
        news_event = { id = poland_uprising.12 hours = 12 random_hours = 6 }

        ai_chance = { 
            base = 1
            modifier = { has_war = no factor = 3 }
        }
    }

    option = {
        name = "This is too dangerous."
        add_political_power = -100

        ai_chance = { base = 1 }
    }
}

news_event = {
    id = poland_uprising.12
    title = "Uprising in Greater Poland!"            # proclamation of the state
    desc = poland_uprising.12.d

    is_triggered_only = yes
    major = yes

    option = {
        name = "Poland does what it can."

        if = { 
            limit = { original_tag = GER }
            hidden_effect = {
                every_owned_state = {
                    limit = {
                        or = { state = 86 state = 87 state = 807 }
                    }
                    add_core_of = POL
                    transfer_state_to = POL
                }
            }

            if = {
                limit = { has_government = communism }
                every_state = {
                    limit = { is_controlled_by = PREV is_core_of = POL }
                    transfer_state_to = POL
                }

                POL = { news_event = { id = poland_uprising.13 hours = 6 } }
            }
            if = {
                limit = { not = { has_government = communism } }
                declare_war_on = {
                    target = POL
                    type = annex_everything
                }
            }
        }
    }
}

news_event = {
    id = poland_uprising.13
    title = "Divisions from Greater Poland Formed!"
    desc = poland_uprising.13.d

    is_triggered_only = yes

    option = {
        name = "Great."
        hidden_effect = {
            load_oob = "POL_poznan_uprising"
        }
    }
}